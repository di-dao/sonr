syntax = "proto3";

package core.identity;

import "core/identity/did.proto";
import "core/identity/account.proto";

option go_package = "github.com/sonrhq/core/x/identity/types";

// Msg defines the Msg service.
service Msg {
  rpc RegisterIdentity        (MsgRegisterIdentity       ) returns (MsgRegisterIdentityResponse       );
  rpc CreateControllerAccount (MsgCreateControllerAccount) returns (MsgCreateControllerAccountResponse);
  rpc UpdateControllerAccount (MsgUpdateControllerAccount) returns (MsgUpdateControllerAccountResponse);
  rpc DeleteControllerAccount (MsgDeleteControllerAccount) returns (MsgDeleteControllerAccountResponse);
  rpc CreateEscrowAccount     (MsgCreateEscrowAccount    ) returns (MsgCreateEscrowAccountResponse    );
  rpc UpdateEscrowAccount     (MsgUpdateEscrowAccount    ) returns (MsgUpdateEscrowAccountResponse    );
  rpc DeleteEscrowAccount     (MsgDeleteEscrowAccount    ) returns (MsgDeleteEscrowAccountResponse    );
}
message MsgRegisterIdentity {
  string      creator      = 1;
  DIDDocument did_document = 2;
  uint64      wallet_id    = 3;
}

message MsgRegisterIdentityResponse {
  bool        success      = 1;
  DIDDocument did_document = 2;
}

message MsgCreateControllerAccount {
  string address   = 1;
  string publicKey = 3;
  repeated string authenticators = 4;
  repeated string wallets = 5;
}

message MsgCreateControllerAccountResponse {
  uint64 id = 1;
  ControllerAccount account = 2;
}

message MsgUpdateControllerAccount {
  string address   = 1;
  uint64 id        = 2;
  repeated string authenticators = 4;
  repeated string wallets = 5;
}

message MsgUpdateControllerAccountResponse {
  ControllerAccount account = 1;
}

message MsgDeleteControllerAccount {
  string creator   = 1;
  string address   = 2;
}

message MsgDeleteControllerAccountResponse {}

message MsgCreateEscrowAccount {
  string creator          = 1;
  string address          = 2;
  string publicKey        = 3;
  string lockupUsdBalance = 4;
}

message MsgCreateEscrowAccountResponse {
   uint64 id = 1;
   EscrowAccount account = 2;
}

message MsgUpdateEscrowAccount {
  string creator          = 1;
  uint64 id               = 2;
  string address          = 3;
  string publicKey        = 4;
  string lockupUsdBalance = 5;
}

message MsgUpdateEscrowAccountResponse {}

message MsgDeleteEscrowAccount {
  string creator = 1;
  string address = 2;
}

message MsgDeleteEscrowAccountResponse {}

