syntax = "proto3";

package sonr.core;
import "proto/common/core.proto";
option go_package = "github.com/sonr-io/core/internal/common";

// For Transfer Chunk Transmission
message Chunk {
  int32 offset = 1;      // Bytes from the beginning of the reader to chunk
  int32 length = 2;      // Length is number of bytes in the chunk
  bytes data = 3;        // Data is the actual chunk
  int64 fingerprint = 4; // Fingerprint is the hash of the chunk
}

// For Transfer File Payload
message FileItem {
  sonr.core.MIME mime = 1; // Standard Mime Type
  string id = 2;           // Local Asset ID
  string name = 3;         // File Name without Path
  string path = 4;         // File Location
  int32 size = 5;          // File Size in Bytes
  Thumbnail thumbnail = 6; // Thumbnail of File
  int32 lastModified = 7;  // Last Modified Time in Seconds
}

// Payload is Data thats being Passed
message Payload {
  repeated Item items = 1; // Payload Items
  Profile owner = 2;       // PROFILE: General Sender Info
  int32 size = 3;          // Payload Size in Bytes
  int64 createdAt = 4;     // Payload Creation Time in Seconds

  // Item in Payload
  message Item {
    MIME mime = 1;         // MIME of the Item
    int32 size = 2;        // Size of the Item in Bytes
    Metadata metadata = 3; // Metadata of the Item

    // Attached Data
    oneof data {
      FileItem file = 4; // FILE: File Item
      UrlItem url = 5;   // URL: Url Item
    }
  }
}

// Thumbnail of File
message Thumbnail {
  bool exists = 1; // Does the thumbnail exist?

  // Value of the Thumbnail
  oneof value {
    bytes buffer = 2; // Thumbnail Buffer
    string path = 3;  // Thumbnail Path
  }
}

// Sonr Url Link Contains metadata of provided URL
message UrlItem {
  sonr.core.MIME mime = 1;             // Standard Mime Type
  string url = 2;                      // OG URL Link
  string title = 3;                    // Meta Field for Title
  string type = 4;                     // OG Type
  string site = 5;                     // Meta field for site
  string siteName = 6;                 // Meta field for sitename
  string description = 7;              // Meta field for description
  repeated OpenGraphImage images = 8;  // Images
  repeated OpenGraphVideo videos = 9;  // Videos
  repeated OpenGraphAudio audios = 10; // Audios
  TwitterCard twitter = 11;            // Twitter Card

  // OpenGraph Image
  message OpenGraphImage {
    string url = 1;       // `meta:"og:image,og:image:url"`
    string secureUrl = 2; // `meta:"og:image:secure_url"`
    int32 width = 3;      // `meta:"og:image:width"`
    int32 height = 4;     // `meta:"og:image:height"`
    string type = 5;      // `meta:"og:image:type"`
  }

  // OpenGraph Video
  message OpenGraphVideo {
    string url = 1;       // `meta:"og:video,og:video:url"`
    string secureUrl = 2; // `meta:"og:video:secure_url"`
    int32 width = 3;      // `meta:"og:video:width"`
    int32 height = 4;     // `meta:"og:video:height"`
    string type = 5;      // `meta:"og:video:type"`
  }

  // OpenGraph Audio
  message OpenGraphAudio {
    string url = 1;       // `meta:"og:audio,og:audio:url"`
    string secureUrl = 2; // `meta:"og:audio:secure_url"`
    string type = 3;      // `meta:"og:audio:type"`
  }

  // Twitter Card
  message TwitterCard {
    string card = 1;            // `meta:"twitter:card"`
    string site = 2;            // `meta:"twitter:site"`
    string siteId = 3;          // `meta:"twitter:site:id"`
    string creator = 4;         // `meta:"twitter:creator"`
    string creatorId = 5;       // `meta:"twitter:creator:id"`
    string description = 6;     // `meta:"twitter:description"`
    string title = 7;           // `meta:"twitter:title"`
    string image = 8;           // `meta:"twitter:image,twitter:image:src"`
    string imageAlt = 9;        // `meta:"twitter:image:alt"`
    string url = 10;            // `meta:"twitter:url"`
    Player player = 11;         // Twitter Item Player
    IPhone iphone = 12;         // Twitter iPhone Data
    IPad ipad = 13;             // Twitter iPad Data
    GooglePlay googlePlay = 14; // Twitter Android Data

    message Player {
      string url = 1;    // `meta:"twitter:player"`
      int32 width = 2;   // `meta:"twitter:width"`
      int32 height = 3;  // `meta:"twitter:height"`
      string stream = 4; // `meta:"twitter:stream"`
    }

    message IPhone {
      string name = 1; // `meta:"twitter:app:name:iphone"`
      string id = 2;   // `meta:"twitter:app:id:iphone"`
      string url = 3;  // `meta:"twitter:app:url:iphone"`
    }

    message IPad {
      string name = 1; // `meta:"twitter:app:name:ipad"`
      string id = 2;   // `meta:"twitter:app:id:ipad"`
      string url = 3;  // `meta:"twitter:app:url:ipad"`
    }

    message GooglePlay {
      string name = 1; // `meta:"twitter:app:name:googleplay"`
      string id = 2;   // `meta:"twitter:app:id:googleplay"`
      string url = 3;  // `meta:"twitter:app:url:googleplay"`
    }
  }
}
