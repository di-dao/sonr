version: "3"

tasks:
  sonrd:
    desc: "Builds the project for current platform"
    cmds:
      - go build -o ./deploy/sonrd ./cmd/sonrd
      - docker build -t sonrhq/sonrd:latest -f ./deploy/Dockerfile.node ./deploy

  hway:
    desc: "Builds the project for current platform"
    cmds:
      - go build -o ./deploy/hway ./cmd/hway
      - docker build -t sonrhq/hway:latest -f ./deploy/Dockerfile.hway ./deploy

  monolith:
    desc: "Builds the monolith"
    cmds:
      - go build -o ./deploy/monolith ./cmd/monolith
      - docker build -t sonrhq/monolith:latest -f ./deploy/Dockerfile.monolith ./deploy
